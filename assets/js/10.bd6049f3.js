(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{372:function(t,s,a){"use strict";a.r(s);var n=a(45),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cle"}},[t._v("#")]),t._v(" CLE")]),t._v(" "),a("blockquote",[a("p",[t._v("Component Library Ecology, UI组件库及其生态搭建全流程")])]),t._v(" "),a("p",[t._v("日前，音巢正在开发一个react移动端UI组件库，目前正在正在开发H5库，后续也有开发RN库，小程序库的计划。\n代码仓库(开发中): https://github.com/melody-core/rem\n组件文档(开发中): https://melody-core.github.io/rem/")]),t._v(" "),a("h2",{attrs:{id:"_1-menorepo仓库管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-menorepo仓库管理"}},[t._v("#")]),t._v(" 1.menorepo仓库管理")]),t._v(" "),a("blockquote",[a("p",[t._v("完善的组件库生态的开发并不只是单单一个组件库————至少要包含 组件库、组件文档平台，单独抽离出的icon库、组件模板项目脚手架，组件开发助手等。")])]),t._v(" "),a("p",[t._v("组件库生态应当是围绕组件库本身，由多个项目构成。\n那么如何管理多项目的代码仓库呢？每个项目都独立为一个仓库吗？\n这种时候，也许你可以选择menorepo的形式，就像react、antd这些知名的开源库。")]),t._v(" "),a("h4",{attrs:{id:"什么是monorepo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是monorepo"}},[t._v("#")]),t._v(" 什么是monorepo?")]),t._v(" "),a("p",[t._v("monorepo指多个项目放在一个项目仓库里。目录形如：\n"),a("img",{attrs:{src:"/目录12.png"}}),t._v("\n这样做的目的是——方便公共依赖管理(比如抹平共用依赖的版本差异)，方便同一系列的项目管理，方便统一lint规范、ts规范，方便关联项目统一发布等。其他有关monorepo的描述，感兴趣的可以自行谷歌查询。\nmonorepo的实现方案有两种\n● 一种是lerna，特点就是上述的目录格式。\n● 一种是yarn workspaces，特点是package.json里的workspace字段。\n当然多数情况是两种都用，都支持。\nRem就是这样，常规情况下我们建议您使用yarn。\nclone项目后，只需要运行 yarn 或者 yarn install即可安装所有依赖。")]),t._v(" "),a("h2",{attrs:{id:"_2-storybook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-storybook"}},[t._v("#")]),t._v(" 2.storybook")]),t._v(" "),a("blockquote",[a("p",[t._v("一个UI组件库当然要配套功能强大的文档平台——毫无疑问，storybook一定是最佳选择之一。")])]),t._v(" "),a("p",[t._v("storybook是一个强大的文档平台开发框架。它的能力来源于它给配置集成的插件——比如国际化/单测结果集成/mdx/readme等。")]),t._v(" "),a("p",[t._v("Rem使用了它作为文档平台的开发依赖。有趣的是，Rem组件库开发之所以选择了scss而不是less去处理样式，一部分原因就在于storybook对less并不十分友好。")]),t._v(" "),a("h2",{attrs:{id:"_3-代码规约集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码规约集成"}},[t._v("#")]),t._v(" 3. 代码规约集成")]),t._v(" "),a("blockquote",[a("p",[t._v("多仓库的形式让我们只需在容器仓库集成一次代码规约约束(lint)，那么所有子仓库的开发者都将遵循它。")])]),t._v(" "),a("p",[t._v("在Rem仓库中，我们集成了阿里大前端的开发规约(https://github.com/alibaba/f2e-spec)。")]),t._v(" "),a("p",[t._v("不仅仅体现在tsx的eslint，这包含scss/md/mdx文件等统统都会受到统一的约束。")]),t._v(" "),a("p",[t._v("更关键的是，提交的commit信息也添加了这样的约束。你的commit -m后面跟随的说明，必须要符合下方的格式：\n行为目的(目标区域或范围): 改动说明。\n如：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("feat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": 添加Tag组件初始化。\n")])])]),a("p",[t._v("即表达rem组件库功能方向的迭代，添加了一个Tag组件。")]),t._v(" "),a("p",[t._v("良好的代码规范是一切团队化开发协作的重要基石，也是代码质量和代码变更记录可读性的重要保障。")]),t._v(" "),a("h3",{attrs:{id:"_4-原生css自定义属性与函数var"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-原生css自定义属性与函数var"}},[t._v("#")]),t._v(" 4.原生css自定义属性与函数var()")]),t._v(" "),a("p",[t._v("在rem的代码仓库中，你能够在packages/rem/src/global中发现这样的代码：")]),t._v(" "),a("div",{staticClass:"language-less extra-class"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":root")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-primary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #1677ff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #00b578"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-warning")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #ff8f1f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-danger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #ff3141"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-white")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #fff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-weak")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #999"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-light")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #ccc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-border-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #eee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-font-size-main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 13px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-color-text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #333"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("apple"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blinkmacsystemfont"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Helvetica Neue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  helvetica"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" segoe ui"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" roboto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PingFang SC'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'miui'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hiragino Sans GB'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Microsoft Yahei'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sans"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("serif"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-z-index-mask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-z-index-popup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-z-index-popover")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1030"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("--rem-z-index-floating-panel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 900"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("然后在某处的css属性中发现了这样的样式定义:")]),t._v(" "),a("div",{staticClass:"language-less extra-class"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rem"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("不必惊讶——这其实是原生css的特性，css自定义属性与css函数。\ncss自定义属性允许我们在根(root)中定义相关的变量，并在任何位置通过css函数var来使用它。\n相关文档请参照\nhttps://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties")]),t._v(" "),a("p",[t._v("请务必在代码中这样使用它们，它将给我们带来极大的收益——例如当我们需要更换组件的主题皮肤，只需要更新我们的全局自定义color属性即可。")]),t._v(" "),a("h2",{attrs:{id:"_5-单元测试集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-单元测试集成"}},[t._v("#")]),t._v(" 5.单元测试集成")]),t._v(" "),a("blockquote",[a("p",[t._v("对于公共基础库来讲，单测是必不可少的。")])]),t._v(" "),a("p",[t._v("本章不过多赘述。")]),t._v(" "),a("h2",{attrs:{id:"_6-组件开发小助手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-组件开发小助手"}},[t._v("#")]),t._v(" 6.组件开发小助手")]),t._v(" "),a("blockquote",[a("p",[t._v("为了统一初始化形态的组件目录与格式，我们最好开发一个组件开发小助手——用来生成一个初始化的组件目录，以及提供组件开发的其他辅助功能。")])]),t._v(" "),a("p",[t._v("在rem中，@六弦 开发了小助手ram(https://melody-core.github.io/melody-core/ram/#how-to-use),使用它可以直接初始化一个组件目录。")]),t._v(" "),a("h2",{attrs:{id:"关于rem开发的补充-ts与prop-types是否冲突"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于rem开发的补充-ts与prop-types是否冲突"}},[t._v("#")]),t._v(" 关于rem开发的补充：TS与prop-types是否冲突？")]),t._v(" "),a("p",[t._v("prop-types是一个包，它常用来跟react项目一起使用。例如：")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PropTypes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prop-types'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" className"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("rest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("classnames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("styles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" className"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token spread"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("rest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propTypes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PropTypes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("毫无疑问，PropTypes用来描述Button的prop类型。\n那么用typescript来对Button的props进行定义后，还需要使用它吗？")]),t._v(" "),a("p",[t._v("答案是 要的,两者并不冲突.")]),t._v(" "),a("h4",{attrs:{id:"编译时与运行时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译时与运行时"}},[t._v("#")]),t._v(" 编译时与运行时")]),t._v(" "),a("p",[t._v("ts是编译时，在源代码编译成js的过程中，它会生效；")]),t._v(" "),a("p",[t._v("而prop-types是运行时，也就是编译后的js在运行的过程中，它会生效。比如我们使用了Button组件，给它传入了一个错误的props类型值，prop-types会及时报错，并将这个错误打印在控制台里。")]),t._v(" "),a("p",[t._v("我们结合两者，前者能在开发阶段给开发者良好的语法提示，后者可以让开发者更便捷的发现使用rem开发的时候，自己写入的bug。")]),t._v(" "),a("p",[t._v("因此，我们这样做会给开发者带来更良好的体验。")]),t._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[t._v("#")]),t._v(" 最后")]),t._v(" "),a("p",[t._v("Rem库正在开发中，如果你对开源产出感兴趣，请钉钉搜索群号 34304813 以申请加入。")])])}),[],!1,null,null,null);s.default=r.exports}}]);